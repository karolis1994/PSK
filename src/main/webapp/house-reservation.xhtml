<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <h:head>
        <title>House reservation</title>
        <script type="text/javascript" src="weekpicker.js"></script>    
        <link rel="stylesheet" type="text/css" href="stylesheet.css"/>
    </h:head>
    <h:body>
        <h3>Select starting week</h3>
        <div class="week-picker"></div>
        
        <br/>
        Reservation from: <h:outputText id="resFrom"></h:outputText>
        <br/>
        Reservation to: <h:outputText id="resTo"></h:outputText>
        
        <br/>
        <br/>
        
        <h3><h:outputLabel for="weekSpinner" value="Select number of weeks" /></h3>
        <p:spinner id="weekSpinner" value="1" min="1" max="100"/>
        
        <c:set var="a" value="#{reservationBean.setExtrasList(houseBean.house.getExtrasList())}" scope="request" />
       
        <h:form>
            <br/>
            <h3><h:outputLabel for="services-table" value="Select additional services"/></h3>
            <h:dataTable id="services-table" value="#{reservationBean.extrasList}" var="extra" styleClass="services-table" rowClasses="tableOddRow, tableEvenRow">
                <h:column>    				
                    <f:facet name="header">Title</f:facet>    				
                    #{extra.title}
                </h:column>
                <h:column>
                    <f:facet name="header">Description</f:facet>
                    #{extra.description}
                </h:column>
                <h:column>
                    <f:facet name="header">Price</f:facet>
                    0 EUR
                </h:column>
                <h:column>
                    <f:facet name="header">Selection</f:facet>
                    <h:selectBooleanCheckbox binding="#{checkbox}">
                        <f:ajax listener="#{reservationBean.extraSelectionChanged(extra, checkbox.value)}"/>
                    </h:selectBooleanCheckbox>
                </h:column>
            </h:dataTable>
            
            <h3>Total price:</h3>
            <h:outputText value="#{reservationBean.totalPrice}"/>
            <br/>
            <br/>
            
            <h:commandButton action="reservation-review" value="Continue" class="butt"/>
            <h:inputText class="startDate" value="#{reservationBean.reservedFrom}" style="visibility: hidden"/>
            <h:inputText class="endDate" value="#{reservationBean.reservedTo}" style="visibility: hidden"/>
        </h:form>
         
    </h:body>
    
</html>
